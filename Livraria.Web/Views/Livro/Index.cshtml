
@{
    ViewData["Title"] = "Listagem de Livros";
}

<div id="divCreateBook" style="display: none;">
    <h1>Cadastro</h1>
    <hr />

    <div class="form-row  mb-3">
        <div class="col-md-5">
            <label>Título</label>
            <input type="text" class="form-control" data-bind="value: titulo" />
        </div>
        <div class="col-md-3">
            <label>Editor(a)</label>
            <input type="text" class="form-control" data-bind="value: editora" />
        </div>
    </div>

    <div class="form-row">
        <div class="col-md-4">
            <label>Autor(a)</label>
            <input type="text" class="form-control" data-bind="value: autor" />
        </div>
        <div class="col-md-2 mb-3">
            <label>Ano de Publicação</label>
            <input type="number" class="form-control" data-bind="value: anoPublicacao" />
        </div>
        <div class="col-md-2 mb-3">
            <label>Qtde. Exemplares</label>
            <input type="number" class="form-control" data-bind="value: qtdeExemplares" />
        </div>
    </div>

    <div class="form-row">
        <div class="col-md-8">
            <input type="button" class="btn btn-danger float-right" value="Salvar" data-bind="click: createBook" />
        </div>
    </div>
</div>

<div id="divEditBook" style="display: none;">
    <h1>Edição</h1>
    <hr />

    <div class="form-row  mb-3">
        <div class="col-md-5">
            <label>Título</label>
            <input type="text" class="form-control" data-bind="value: titulo" />
        </div>
        <div class="col-md-3">
            <label>Editor(a)</label>
            <input type="text" class="form-control" data-bind="value: editora" />
        </div>
    </div>

    <div class="form-row">
        <div class="col-md-4">
            <label>Autor(a)</label>
            <input type="text" class="form-control" data-bind="value: autor" />
        </div>
        <div class="col-md-2 mb-3">
            <label>Ano de Publicação</label>
            <input type="number" class="form-control" data-bind="value: anoPublicacao" />
        </div>
        <div class="col-md-2 mb-3">
            <label>Qtde. Exemplares</label>
            <input type="number" class="form-control" data-bind="value: qtdeExemplares" />
        </div>
    </div>

    <div class="form-row">
        <div class="col-md-8">
            <input type="button" class="btn btn-danger float-right" value="Salvar alterações" data-bind="click: saveEditBook" />
        </div>
    </div>
</div>

<div id="divListBook">
    <h1>Livros</h1>

    <button class="btn btn-danger float-right mb-2" data-bind="click: btnCreateBook">Cadastrar</button>

    <table class="table table-striped table:hover text-center">
        <!-- ko if: booksList().length > 0 -->
        <thead>
            <tr>
                <th>Título</th>
                <th>Editora</th>
                <th>Ano Publicação</th>
                <th>Autor</th>
                <th>Qtde. Exemplares</th>
                <th>#</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: booksList">
            <tr>
                <td data-bind="text: titulo"></td>
                <td data-bind="text: editora"></td>
                <td data-bind="text: anoPublicacao"></td>
                <td data-bind="text: autor"></td>
                <td class="btn-link" data-bind="text: exemplares().length, attr: { title: exemplares }"></td>
                <td>
                    <button class="btn btn-primary" data-bind="click: editBook">Edit</button>
                    <button class="btn btn-dark" data-bind="click: deleteBook">Delete</button>
                </td>
            </tr>
        </tbody>
        <!-- /ko -->
        <!-- ko if: booksList().length == 0 -->
        <tbody>
            <tr>
                <td colspan="4" align="center">Nao há Livros cadastrados</td>
            </tr>
        </tbody>
        <!-- /ko -->
    </table>
</div>

<script src="~/js/Knockout/Service/LivroService.js"></script>
<script src="~/js/Knockout/Controller/LivroController.js"></script>